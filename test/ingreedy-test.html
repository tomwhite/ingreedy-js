<script src="tinytest.js"></script>
<script src="../ingreedy.js"></script>
<script>

  function arrayEq(expected, actual) {
    eq(expected.length, actual.length);
    for (var i = 0; i < expected.length; i++) {
      eq(expected[i], actual[i]);
    }
  }

 tests({

   // normalization.js

   'tsvToJson': function() {
     var j = tsvToJson(`name\tcalories\tcarbohydrate_content\tfat_content\tfiber_content\tprotein_content
Celeriac, raw\t42\t9.2\t0.3\t1.8\t1.5
Pecans\t691\t14\t72\t9.6\t9.2`);
     eq("Celeriac, raw", j[0].name);
     eq(9.2, j[0].carbohydrate_content);
     eq("Pecans", j[1].name);
     eq(14, j[1].carbohydrate_content);
   },

   'normalize': function() {
     eq("Celeriac, raw", normalize("celeriac"));
   },

   'lookup': function() {
     eq("Celeriac, raw", lookup("celeriac").name);
     eq(9.2, lookup("celeriac").carbohydrate_content);
   },

   // measures.js

   'normalizeQuantity': function() {
     eq(1, normalizeQuantity("1"));
     eq(1.5, normalizeQuantity("1 1/2"));
     eq(5.5, normalizeQuantity("11/2"));
     eq(true, isNaN(normalizeQuantity("1blah")));
   },

   'calculateMass': function() {
     eq(2, calculateMass("2", "gram", "onion"));
     eq(56.6, calculateMass("2", "ounce", "onion"));
     eq(908, calculateMass("2", "pound", "onion"));
     eq(true, isNaN(calculateMass("2", "hundredweight", "onion")));
     eq(350, calculateMass("2", null, "apple"));
     eq(350, calculateMass("2", "", "apple"));
     eq(true, isNaN(calculateMass("2", null, "rabbit")));
     eq(true, isNaN(calculateMass("2", "", "rabbit")));
     eq(true, isNaN(calculateMass("", "", "salt")));
     eq(true, isNaN(calculateMass("2blah", "blah", "onion")));
   },

 });
</script>