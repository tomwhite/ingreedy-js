<script src="tinytest.js"></script>
<script src="ingreedy-js.js"></script>
<script>

  function arrayEq(expected, actual) {
    eq(expected.length, actual.length);
    for (var i = 0; i < expected.length; i++) {
      eq(expected[i], actual[i]);
    }
  }

 tests({

   'cleanUnicodeFractions': function() {
     eq("1 7/8", cleanUnicodeFractions("1\u215e"));
     eq(" 1/2", cleanUnicodeFractions("\u00bd"));
   },

   'clumpFractions': function() {
     eq("aaa 1$2/3 bbb", clumpFractions("aaa 1 2/3 bbb"));
   },

   'tokenize': function() {
     arrayEq(["100", "grams", "flour"], tokenize("100 grams flour"));
     arrayEq(["100", "grams", "big", ",", "green", "apples", "(", "not", "rotten", ")"], tokenize("100 grams big, green apples (not rotten)"));
   },

   'getFeatures': function() {
     var tokens = ["100", "grams", "potatoes"]
     arrayEq(["I2", "L4", "NoCAP", "NoPAREN"], getFeatures("grams", 2, tokens));
   },

   'isCapitalized': function() {
     eq(true, isCapitalized("Apple"));
     eq(false, isCapitalized("apple"));
     eq(false, isCapitalized("aPple"));
   },

   'lengthGroup': function() {
     eq("4", lengthGroup(0));
     eq("4", lengthGroup(1));
     eq("8", lengthGroup(4));
     eq("X", lengthGroup(20));
   },

   'insideParenthesis': function() {
     var tokens = ["100", "grams", "big", ",", "green", "apples", "(", "not", "rotten", ")"]
     eq(true, insideParenthesis("(", tokens));
     eq(true, insideParenthesis(")", tokens));
     eq(true, insideParenthesis("rotten", tokens));
     eq(false, insideParenthesis("green", tokens));
   },

   'export_data': function() {
     var lines = ["100 grams potatoes", "2 large eggs, freshly laid"]
     eq([`100	I1	L4	NoCAP	NoPAREN
grams	I2	L4	NoCAP	NoPAREN
potatoes	I3	L4	NoCAP	NoPAREN

2	I1	L8	NoCAP	NoPAREN
large	I2	L8	NoCAP	NoPAREN
eggs	I3	L8	NoCAP	NoPAREN
,	I4	L8	NoCAP	NoPAREN
freshly	I5	L8	NoCAP	NoPAREN
laid	I6	L8	NoCAP	NoPAREN
`], export_data(lines));
   },

 });
</script>